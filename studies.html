<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Hello World</title>
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
  </head>
  <body>
    <div id="app"></div>
    <script type="text/babel">
    const viewport = document.querySelector('meta[name=viewport]')
    const zoomEnabledViewportContent = viewport.attributes['content'].value + ', maximum-scale=5, user-scalable=yes'
    const zoomDisabledViewportContent = viewport.attributes['content'].value + ', maximum-scale=1, user-scalable=no'
    const isZoomInput = el => el && (el.tagName === 'SELECT' || (el.tagName === 'INPUT' && el.type !== 'checkbox' && el.type !== 'radio'))
    const disableZoom = () => { viewport.attributes['content'].value = zoomDisabledViewportContent }
    const enableZoom = () => { viewport.attributes['content'].value = zoomEnabledViewportContent }
    
    class Application extends React.Component {
        render() {
            const { vp } = this.props
            return (
                <div>{vp}
                    {[1,2,3,4,5].map(l => (<div key={l.toString()} >
                        <input
                            placeholder={'input #'+l}
                            onBlur={(event) => {
                                console.log('onblur')
                                if (isZoomInput(event.relatedTarget)) window.disableZoom()
                                else enableZoom()
                                }
                            }
                            onFocus={event => {
                                console.log('onfocus')
                                if (isZoomInput(event.target)) disableZoom()
                            }} 
                            onTouchEnd={
                                event => { 
                                    console.log('ontouchend')
                                    if (isZoomInput(event.target)) disableZoom() }
                            } 
                        >
                        </input>
                    </div>))}
                </div>
            )
        }
    }
    ReactDOM.render(<Application vp={100}/>, document.getElementById('app'));
    </script>
  </body>
</html>